{% doc %}
  @prompt
    Create a two-column layout section for a product page.
    
    Left Column (Product Info):
    
    A high-quality product image.
    
    Below the image, display:
    
    The product name in large, bold typography.
    
    A concise product description.
    
    A prominent, styled Call-to-Action (CTA) button.
    
    Right Column (Media):
    
    An embedded video showcasing the product in use.
    
    Requirements:
    
    The columns must be side-by-side on desktop and stack vertically on mobile.
    
    The section should be visually balanced and modern.
    
    Ensure the CTA button is eye-catching and encourages clicks., the vidoe should fill the right side,making the left anf right equal width and height, th left side content should be at the center of their container, the left side should have a background image, product image should be responsive, leave no space or radius between left and right, i want to be able to set left background as color also, and text should be fully editable using proper schema, use a random and suitable video for placeholder in right side, make video play automatically, show controls when hovered pon, mute by default, video should fill entire right side and responsive for mobile, allow video upload directly from d device also video selection from already updated

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-product-showcase-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    max-width: 100%;
    margin: 0 auto;
    min-height: 600px;
  }

  .ai-product-showcase-column-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .ai-product-showcase-left-column-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100%;
    text-align: center;
    padding: 40px;
    {% if block.settings.background_type == 'image' and block.settings.background_image %}
      background-image: url('{{ block.settings.background_image | image_url: width: 800 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {% else %}
      background-color: {{ block.settings.background_color }};
    {% endif %}
    position: relative;
  }

  {% if block.settings.background_type == 'image' and block.settings.background_image %}
    .ai-product-showcase-left-column-{{ ai_gen_id }}::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: {{ block.settings.overlay_color }};
      opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};
      z-index: 1;
    }
  {% endif %}

  .ai-product-showcase-left-content-{{ ai_gen_id }} {
    display:flex;
    flex-direction:column;
    justify-content:center;
    background:red;
    align-items:center;
    position: relative;
    z-index: 2;
    width: 100%;
  }

  .ai-product-showcase-image-container-{{ ai_gen_id }} {
    width: 100%;
    max-width: 400px;
    margin-bottom: 24px;
  }

  .ai-product-showcase-image-container-{{ ai_gen_id }} img {
    width: 100%;
    height: {{section.settings.img_height}};
    display: block;
  }

  .ai-product-showcase-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 1;
    background-color: rgba(244, 244, 244, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .ai-product-showcase-image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 200px;
    max-height: 200px;
  }

  .ai-product-showcase-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 8px 16px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 4px;
    font-size: 14px;
    color: #666;
    text-align: center;
  }

  .ai-product-showcase-content-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .ai-product-showcase-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    font-weight:700;
    color: {{ block.settings.text_color }};
    margin: 0 0 16px 0;
    line-height: 1.2;
  }

  .ai-product-showcase-description-{{ ai_gen_id }} {
    font-size: {{ block.settings.description_size }}px;
    color: {{ block.settings.text_color }};
    line-height: 1.6;
    margin: 00 24px 0;
  }

  .ai-product-showcase-cta-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    background-color: {{ block.settings.button_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: {{ block.settings.button_text_size }}px;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
  }

  .ai-product-showcase-cta-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
    transform: translateY(-2px);box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .ai-product-showcase-video-container-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #000;
    position: relative;
    overflow: hidden;
    min-height: 600px;
  }

  .ai-product-showcase-video-container-{{ ai_gen_id }} video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;transition: opacity 0.3s ease;
  }

  .ai-product-showcase-video-container-{{ ai_gen_id }} iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    object-fit: cover;
    transition: opacity 0.3s ease;
  }

  .ai-product-showcase-video-container-{{ ai_gen_id }}:hover video,
  .ai-product-showcase-video-container-{{ ai_gen_id }}:hover iframe {
    opacity: 0.9;
  }

  .ai-product-showcase-video-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    min-height: 600px;
  }

  .ai-product-showcase-video-placeholder-{{ ai_gen_id }} svg {
    width: 80px;
    height: 80px;
    color: #999;
  }

  .ai-product-showcase-video-empty-state-{{ ai_gen_id }} {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 8px 16px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 4px;
    font-size: 14px;
    color: #666;
    text-align: center;
  }

  @media screen and (max-width: 768px) {
    .ai-product-showcase-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 0;
      min-height: auto;
    }

    .ai-product-showcase-column-{{ ai_gen_id }} {
      height: auto;
    }

    .ai-product-showcase-left-column-{{ ai_gen_id }} {
      justify-content: flex-start;
      height: auto;
      padding: 32px 20px;
      min-height: auto;
    }

    .ai-product-showcase-video-container-{{ ai_gen_id }} {
      height: 50vh;
      min-height: 300px;max-height: 400px;
    }

    .ai-product-showcase-video-placeholder-{{ ai_gen_id }} {
      height: 50vh;
      min-height: 300px;
      max-height: 400px;
    }

    .ai-product-showcase-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.85 }}px;
    }

    .ai-product-showcase-description-{{ ai_gen_id }} {
      font-size: {{ block.settings.description_size | times: 0.9 }}px;
    }

    .ai-product-showcase-cta-{{ ai_gen_id }} {
      width: 100%;
      justify-content: center;
    }
  }

  @media screen and (max-width: 480px) {
    .ai-product-showcase-video-container-{{ ai_gen_id }} {
      height: 40vh;
      min-height: 250px;
      max-height: 300px;
    }

    .ai-product-showcase-video-placeholder-{{ ai_gen_id }} {
      height: 40vh;
      min-height: 250px;
      max-height: 300px;
    }

    .ai-product-showcase-left-column-{{ ai_gen_id }} {
      padding: 24px 16px;
    }
  }
{% endstyle %}<product-showcase-video-{{ ai_gen_id }}
  class="ai-product-showcase-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-product-showcase-column-{{ ai_gen_id }} ai-product-showcase-left-column-{{ ai_gen_id }}">
    <div class="ai-product-showcase-left-content-{{ ai_gen_id }}">
    <div class="ai-product-showcase-image-container-{{ ai_gen_id }}">
  {% if block.settings.product_image %}
    <img 
      src="{{ block.settings.product_image | image_url: width: 800 }}" 
      alt="{{ block.settings.product_image.alt | escape }}" 
      loading="lazy" 
      width="800"
      height="{{ block.settings.product_image.height | times: 800 | divided_by: block.settings.product_image.width | round }}"
      style="height: {{ block.settings.image_height }}; width: auto;"
      class="ai-product-showcase-image-{{ ai_gen_id }}"
    >
  {% else %}
    <div class="ai-product-showcase-image-placeholder-{{ ai_gen_id }}">
      {{ 'product-1' | placeholder_svg_tag }}
      <div class="ai-product-showcase-empty-state-{{ ai_gen_id }}">
        Add a product image
      </div>
    </div>
  {% endif %}
</div>


      <div class="ai-product-showcase-content-{{ ai_gen_id }}">
        {% if block.settings.product_title != blank %}
          <h2 class="ai-product-showcase-title-{{ ai_gen_id }}">
            {{ block.settings.product_title }}
          </h2>
        {% endif %}

        {% if block.settings.product_description != blank %}
          <div class="ai-product-showcase-description-{{ ai_gen_id }}">
            {{ block.settings.product_description }}
          </div>
        {% endif %}

        {% if block.settings.cta_text != blank %}
          <a
            href="{{ block.settings.cta_link | default: '#' }}"
            class="ai-product-showcase-cta-{{ ai_gen_id }}"
          >
            {{ block.settings.cta_text }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="ai-product-showcase-column-{{ ai_gen_id }}">
    <div class="ai-product-showcase-video-container-{{ ai_gen_id }}">
      {% if block.settings.video_type == 'upload' and block.settings.video_file %}
        <video
          autoplay
          muted
          loop
          playsinline
          data-video-id="{{ ai_gen_id }}"
        >
          <source src="{{ block.settings.video_file | file_url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {% elsif block.settings.video_type == 'url' and block.settings.video_url != blank %}
        {% assign video_id = block.settings.video_url | split: '/' | last %}
        {% if block.settings.video_url contains 'youtube.com' or block.settings.video_url contains 'youtu.be' %}
          {% if block.settings.video_url contains 'youtu.be' %}
            {% assign video_id = block.settings.video_url | split: '/' | last | split: '?' | first %}
          {% elsif block.settings.video_url contains 'watch?v=' %}
            {% assign video_id = block.settings.video_url | split: 'watch?v=' | last | split: '&' | first %}
          {% endif %}
          <iframe
            src="https://www.youtube.com/embed/{{ video_id }}?autoplay=1&mute=1&controls=0&modestbranding=1&rel=0&showinfo=0&loop=1&playlist={{ video_id }}"
            title="Product video"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            data-video-id="{{ ai_gen_id }}"
            data-video-type="youtube"
          ></iframe>
        {% elsif block.settings.video_url contains 'vimeo.com' %}
          {% assign video_id = block.settings.video_url | split: '/' | last %}
          <iframe
            src="https://player.vimeo.com/video/{{ video_id }}?autoplay=1&muted=1&controls=0&loop=1&background=1"
            title="Product video"
            allow="autoplay; fullscreen; picture-in-picture"
            allowfullscreen
            data-video-id="{{ ai_gen_id }}"
            data-video-type="vimeo"
          ></iframe>
        {% endif %}
      {% else %}
        <div class="ai-product-showcase-video-placeholder-{{ ai_gen_id }}">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5,3 19,12 5,21 5,3"></polygon>
          </svg>
          <div class="ai-product-showcase-video-empty-state-{{ ai_gen_id }}">
            Add a video file or URL
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</product-showcase-video-{{ ai_gen_id }}>

<script>
  (function() {
    class ProductShowcaseVideo{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.setupVideoControls();
      }

      setupVideoControls() {
        const videoContainer = this.querySelector('.ai-product-showcase-video-container-{{ ai_gen_id }}');
        const video = videoContainer.querySelector('video');
        const youtubeIframe = videoContainer.querySelector('iframe[data-video-type="youtube"]');
        const vimeoIframe = videoContainer.querySelector('iframe[data-video-type="vimeo"]');

        if (video) {
          this.setupNativeVideoControls(video, videoContainer);
        }

        if (youtubeIframe) {
          this.setupYouTubeControls(youtubeIframe, videoContainer);
        }

        if (vimeoIframe) {
          this.setupVimeoControls(vimeoIframe, videoContainer);
        }
      }

      setupNativeVideoControls(video, container) {
        container.addEventListener('mouseenter', () => {
          video.controls = true;
        });

        container.addEventListener('mouseleave', () => {
          video.controls = false;
        });
      }

      setupYouTubeControls(iframe, container) {
        const originalSrc = iframe.src;
        
        container.addEventListener('mouseenter', () => {
          iframe.src = originalSrc.replace('controls=0', 'controls=1');
        });

        container.addEventListener('mouseleave', () => {
          iframe.src = originalSrc.replace('controls=1', 'controls=0');
        });
      }

      setupVimeoControls(iframe, container) {
        const originalSrc = iframe.src;
        
        container.addEventListener('mouseenter', () => {
          iframe.src = originalSrc.replace('controls=0', 'controls=1').replace('background=1', 'background=0');
        });

        container.addEventListener('mouseleave', () => {
          iframe.src = originalSrc.replace('controls=1', 'controls=0').replace('background=0', 'background=1');
        });
      }
    }

    customElements.define('product-showcase-video-{{ ai_gen_id }}', ProductShowcaseVideo{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Product showcase",
  "settings": [
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "radio",
      "id": "background_type",
      "label": "Background type",
      "options": [
        {
          "value": "color",
          "label": "Color"
        },
        {
          "value": "image",
          "label": "Image"
        }
      ],
      "default": "color"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f4f4f4"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image"
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Image overlay color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Image overlay opacity",
      "default": 30
    },
    {
      "type": "header",
      "content": "Product information"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Product image"
    },
    {
          "type": "text",
          "id": "image_height",
          "label": "Image height (CSS)",
          "default": "400px",
          "info": "Enter any CSS value (e.g. 300px, 50%, auto, 60vh)"
        },
    {
      "type": "inline_richtext",
      "id": "product_title",
      "label": "Product title",
      "default": "Premium Product Name"
    },
    {
      "type": "richtext",
      "id": "product_description",
      "label": "Product description",
      "default": "<p>Discover the perfect blend of style and functionality with our premium product. Crafted with attention to detail and designed to exceed your expectations.</p>"
    },
    {
      "type": "header",
      "content": "Call to action"
    },
    {
      "type": "inline_richtext",
      "id": "cta_text",
      "label": "Button text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "radio",
      "id": "video_type",
      "label": "Video source",
      "options": [
        {
          "value": "upload",
          "label": "Upload video file"
        },
        {
          "value": "url",
          "label": "Video URL"
        }
      ],
      "default": "upload"
    },
    {
      "type": "video",
      "id": "video_file",
      "label": "Video file",
      "info": "Upload an MP4 video file from your device"
    },
    {
      "type": "text",
      "id": "video_url",
      "label": "Video URL",
      "info": "YouTube or Vimeo URL. Used when'Video URL' is selected above."
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 24,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 36
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description size",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_text_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button text size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button color",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button hover color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Button style"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Vertical padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 16,
      "max": 48,
      "step": 4,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 32
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 8
    }
  ],
  "presets": [
    {
      "name": "Product showcase"
    }
  ],
  "tag": null
}
{% endschema %}